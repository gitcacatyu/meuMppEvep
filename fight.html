<!-- fight.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Arena de Luta</title>
  <link rel="stylesheet" href="ystyles.css" />
</head>
<body>

  <h1> Arena de Luta </h1>
  <h3>Cada jogador clica em "Atacar" no seu tempo... cuidado com a sorte!</h3>
<h3>Moedas: <span id="moedasDisplay">0</span></h3>

  <div class="fightarea">
    <div id="char">
  <img id="imgChar" src="imgs/default_dragao.png" width="150" />
 
      <div class="lifebar">
        <div class="bar" style="width: 100%;"></div>
      </div>
      <strong class="name">--</strong>
      <div><button class="attackButton">Atacar</button></div>
    </div>




    <div id="monster">
  <img id="imgMonster" src="imgs/default_dragao.png" width="150" />

      <div class="lifebar">
        <div class="bar" style="width: 100%;"></div>
      </div>
      <strong class="name">--</strong>
      <div><button class="attackButton">Atacar</button></div>
    </div>
  </div>

  <ul class="log"></ul>
<audio id="somAtaque" src="sons/som_ataque.mp3"></audio>
<audio id="somDefesa" src="sons/som_defesa.mp3"></audio>
<audio id="somMorte" src="sons/som_morte.mp3"></audio>



  <button onclick="location.reload()" style="margin-top: 20px;">üîÅ Jogar Novamente</button>
  <select id="temaSelect"></select>

  <script src="classe.js"></script>
  <script src="ocript.js"></script>
  <script>
    /*// Certifica que os sons est√£o carregando
    const ataque = new Audio('ataque.mp3');
    const defesa = new Audio('defesa.mp3');
    const perdeu = new Audio('perdeu.mp3');

    function atacar() {
      ataque.play();
      console.log("Ataque feito!");
    }

    function defender() {
      defesa.play();
      console.log("Defesa feita!");
    }

    function morrer() {
      perdeu.play();
      console.log("Morte rolando!");
    }

    // Agora liga os bot√µes no ataque
    document.querySelectorAll(".attackButton").forEach(btn => {
      btn.addEventListener("click", atacar);
    });
    */
  


function atualizarMoedas() {
  const moedas = parseInt(localStorage.getItem("moedas") || "0");
  document.getElementById("moedasDisplay").innerText = moedas;
}

window.onload = () => {
  atualizarMoedas();
}
function fimDaLuta(vencedor) {
  const log = document.querySelector(".log");
  const mensagem = document.createElement("li");
  mensagem.innerText = `üî• A luta acabou! Vencedor: ${vencedor} üî•`;
  log.appendChild(mensagem);

  // Toca som de morte s√≥ por dramatiza√ß√£o üòÖ
  document.getElementById("somMorte").play();
}

function fimDaLuta(vencedor) {
  const logEl = document.querySelector(".log");
  const mensagem = document.createElement("li");
  mensagem.innerText = `üèÜ Fim da luta! Vencedor: ${vencedor}`;
  logEl.appendChild(mensagem);

  // D√° moedas pro jogador vencedor!
  let moedas = parseInt(localStorage.getItem("moedas") || "0");
  moedas += 50;
  localStorage.setItem("moedas", moedas);

  // Atualiza o n√∫mero de moedas na tela
  const display = document.getElementById("moedasDisplay");
  if (display) display.innerText = moedas;

  // Opcional: voc√™ pode colocar um delay e depois mostrar um bot√£o de reiniciar, ou redirecionar, etc.
}


function atualizarImagensDoCombate(nome1, nome2) {
  const img1 = document.getElementById("imgChar");
  const img2 = document.getElementById("imgMonster");

  img1.src = pegarImagemDoDragao(nome1);
  img2.src = pegarImagemDoDragao(nome2);


}
 atualizarImagensDoCombate(jogador1.nome, jogador2.nome);
 fimDaLuta(jogador1.nome); // ou quem for o vencedor
  </script>
</body>
</html>
